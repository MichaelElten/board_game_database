TRUE ~ "no english name detected")) %>%
select(new_name, name0,name1,name2,name3,name4,name5,name6,name7,name8,name9,everything())
View(bgg_data_cut_newname)
textcat("Star wars rebellion")
textcat("Great Western Trail")
textcat("great western trail")
library(string)
library(stringr)
bgg_data_cut_newname2<-bgg_data_cut %>%
mutate(new_name=case_when(
textcat(str_to_lower(name0))=="english" ~ name0,
textcat(str_to_lower(name1))=="english" ~ name1,
textcat(str_to_lower(name2))=="english" ~ name2,
textcat(str_to_lower(name3))=="english" ~ name3,
textcat(str_to_lower(name4))=="english" ~ name4,
textcat(str_to_lower(name5))=="english" ~ name5,
textcat(str_to_lower(name6))=="english" ~ name6,
textcat(str_to_lower(name7))=="english" ~ name7,
textcat(str_to_lower(name8))=="english" ~ name8,
textcat(str_to_lower(name9))=="english" ~ name9,
TRUE ~ "no english name detected")) %>%
select(new_name, name0,name1,name2,name3,name4,name5,name6,name7,name8,name9,everything())
View(bgg_data_cut_newname2)
View(bgg_data_cut_newname2)
bgg_data_cut_newname%>%
summarise(total_non_en_detected=sum(new_name=="no english name detected"))
bgg_data_cut_newname2%>%
summarise(total_non_en_detected=sum(new_name=="no english name detected"))
bgg_data_cut_newname %>%
filter(new_name="no english name detected")
bgg_data_cut_newname %>%
filter(new_name=="no english name detected")
textcat("brass")
textcat("Brass")
textcat("Brass deluxe")
textcat("nemesis")
textcat("a feast for Odin")
textcat("a feast for")
bgg_data_cut_newname2<-bgg_data_cut %>%
mutate(new_name=case_when(
textcat(str_to_lower(name0))%in% c("english","scots") ~ name0,
textcat(str_to_lower(name1))%in% c("english","scots") ~ name1,
textcat(str_to_lower(name2))%in% c("english","scots") ~ name2,
textcat(str_to_lower(name3))%in% c("english","scots") ~ name3,
textcat(str_to_lower(name4))%in% c("english","scots") ~ name4,
textcat(str_to_lower(name5))%in% c("english","scots") ~ name5,
textcat(str_to_lower(name6))%in% c("english","scots") ~ name6,
textcat(str_to_lower(name7))%in% c("english","scots") ~ name7,
textcat(str_to_lower(name8))%in% c("english","scots") ~ name8,
textcat(str_to_lower(name9))%in% c("english","scots") ~ name9,
TRUE ~ "no english name detected")) %>%
select(new_name, name0,name1,name2,name3,name4,name5,name6,name7,name8,name9,everything())
bgg_data_cut_newname2 %>%
summarise(sum(new_name="no name"))
bgg_data_cut_newname2 %>%
summarise(sum(new_name=="no name"))
bgg_data_cut_newname2<-bgg_data_cut %>%
mutate(new_name=case_when(
textcat(str_to_lower(name0))%in% c("english","scots") ~ name0,
textcat(str_to_lower(name1))%in% c("english","scots") ~ name1,
textcat(str_to_lower(name2))%in% c("english","scots") ~ name2,
textcat(str_to_lower(name3))%in% c("english","scots") ~ name3,
textcat(str_to_lower(name4))%in% c("english","scots") ~ name4,
textcat(str_to_lower(name5))%in% c("english","scots") ~ name5,
textcat(str_to_lower(name6))%in% c("english","scots") ~ name6,
textcat(str_to_lower(name7))%in% c("english","scots") ~ name7,
textcat(str_to_lower(name8))%in% c("english","scots") ~ name8,
textcat(str_to_lower(name9))%in% c("english","scots") ~ name9,
TRUE ~ "no name")) %>%
select(new_name, name0,name1,name2,name3,name4,name5,name6,name7,name8,name9,everything())
bgg_data_cut_newname2 %>%
summarise(sum(new_name=="no name"))
text_cat("epizootic")
textcat("epizootic")
textcat("forbidden stars")
textcat("brass: birmingham")
bgg_data_newname<-head(bgg_data,1000) %>%
mutate(new_name=case_when(
textcat(str_to_lower(name0))%in% c("english","scots") ~ name0,
textcat(str_to_lower(name1))%in% c("english","scots") ~ name1,
textcat(str_to_lower(name2))%in% c("english","scots") ~ name2,
textcat(str_to_lower(name3))%in% c("english","scots") ~ name3,
textcat(str_to_lower(name4))%in% c("english","scots") ~ name4,
textcat(str_to_lower(name5))%in% c("english","scots") ~ name5,
textcat(str_to_lower(name6))%in% c("english","scots") ~ name6,
textcat(str_to_lower(name7))%in% c("english","scots") ~ name7,
textcat(str_to_lower(name8))%in% c("english","scots") ~ name8,
textcat(str_to_lower(name9))%in% c("english","scots") ~ name9,
TRUE ~ name0)) %>%
select(new_name, -name0,-name1,-name2,-name3,-name4,-name5,-name6,-name7,-name8,-name9,everything())
View(bgg_data_newname)
textcat("twilight struggle")
bgg_data_newname<-bgg_data %>%
mutate(new_name=case_when(
textcat(str_to_lower(name0))%in% c("english","scots") ~ name0,
textcat(str_to_lower(name1))%in% c("english","scots") ~ name1,
textcat(str_to_lower(name2))%in% c("english","scots") ~ name2,
textcat(str_to_lower(name3))%in% c("english","scots") ~ name3,
textcat(str_to_lower(name4))%in% c("english","scots") ~ name4,
textcat(str_to_lower(name5))%in% c("english","scots") ~ name5,
textcat(str_to_lower(name6))%in% c("english","scots") ~ name6,
textcat(str_to_lower(name7))%in% c("english","scots") ~ name7,
textcat(str_to_lower(name8))%in% c("english","scots") ~ name8,
textcat(str_to_lower(name9))%in% c("english","scots") ~ name9,
TRUE ~ name0)) %>%
select(new_name, everything(),-name0,-name1,-name2,-name3,-name4,-name5,-name6,-name7,-name8,-name9,)
summary(bgg_data$owned)
ggplot(data=bgg_data,aes(x=owned)) %?%
ggplot(data=bgg_data,aes(x=owned))+
geom_histogram()
summary(bgg_data$usersrated)
bgg_data2<-bgg_data %>%
filter(usersrated>3)
View(bgg_data2)
bgg_data2<-bgg_data %>%
filter(usersrated>10)
bgg_data2<-bgg_data %>%
filter(usersrated>50)
summary(bgg_data2$owned)
bgg_data2<-bgg_data %>%
filter(usersrated>50) %>%
filter(owned>10)
bgg_data2<-bgg_data %>%
filter(usersrated>50) %>%
filter(owned>50)
#now filtered to 20k - a bit better!
bgg_data2<-bgg_data %>%
filter(usersrated>50) %>%
filter(owned>50)%>%
mutate(new_name=case_when(
textcat(str_to_lower(name0))%in% c("english") ~ name0,
textcat(str_to_lower(name1))%in% c("english") ~ name1,
textcat(str_to_lower(name2))%in% c("english") ~ name2,
textcat(str_to_lower(name3))%in% c("english") ~ name3,
textcat(str_to_lower(name4))%in% c("english") ~ name4,
textcat(str_to_lower(name5))%in% c("english") ~ name5,
textcat(str_to_lower(name6))%in% c("english") ~ name6,
textcat(str_to_lower(name7))%in% c("english") ~ name7,
textcat(str_to_lower(name8))%in% c("english") ~ name8,
textcat(str_to_lower(name9))%in% c("english") ~ name9,
TRUE ~ name0)) %>%
select(new_name, name0,name1,name2,name3,name4,name5,name6,name7,name8,name9,everything())
write_csv(bgg_data2,"./output/board_game_dataset.csv")
# now filtered to 20k - a bit better!
bgg_data3<-bgg_data %>%
filter(usersrated>100) %>%
filter(owned>100)
View(bgg_data3)
# now filtered to 20k - a bit better!
bgg_data3<-bgg_data %>%
filter(usersrated>200) %>%
filter(owned>200)
# now filtered to 9k - a bit better!
bgg_data3<-bgg_data %>%
filter(usersrated>200) %>%
filter(owned>200)%>%
mutate(new_name=case_when(
textcat(str_to_lower(name0))%in% c("english") ~ name0,
textcat(str_to_lower(name1))%in% c("english") ~ name1,
textcat(str_to_lower(name2))%in% c("english") ~ name2,
textcat(str_to_lower(name3))%in% c("english") ~ name3,
textcat(str_to_lower(name4))%in% c("english") ~ name4,
textcat(str_to_lower(name5))%in% c("english") ~ name5,
textcat(str_to_lower(name6))%in% c("english") ~ name6,
textcat(str_to_lower(name7))%in% c("english") ~ name7,
textcat(str_to_lower(name8))%in% c("english") ~ name8,
textcat(str_to_lower(name9))%in% c("english") ~ name9,
TRUE ~ name0)) %>%
select(new_name, name0,name1,name2,name3,name4,name5,name6,name7,name8,name9,everything())
write_csv(bgg_data2,"./output/board_game_dataset.csv")
View(bgg_data3)
# now filtered to 9k - a bit better!
bgg_data3<-bgg_data %>%
filter(usersrated>200) %>%
filter(owned>200)%>%
mutate(new_name=case_when(
textcat(str_to_lower(name0))%in% c("english") ~ name0,
textcat(str_to_lower(name1))%in% c("english") ~ name1,
textcat(str_to_lower(name2))%in% c("english") ~ name2,
textcat(str_to_lower(name3))%in% c("english") ~ name3,
textcat(str_to_lower(name4))%in% c("english") ~ name4,
textcat(str_to_lower(name5))%in% c("english") ~ name5,
textcat(str_to_lower(name6))%in% c("english") ~ name6,
textcat(str_to_lower(name7))%in% c("english") ~ name7,
textcat(str_to_lower(name8))%in% c("english") ~ name8,
textcat(str_to_lower(name9))%in% c("english") ~ name9,
TRUE ~ name0)) %>%
select(new_name, name0,name1,name2,name3,name4,name5,name6,name7,name8,name9,everything()) %>%
select(-contains("honor"),contains("version"),contains("implementation"),contains("accessory"),contains("expansion"),contains("compilation"))
View(bgg_data3)
bgg_data3 <-bgg_data3 %>%
select(-contains("honor"),-contains("version"),-contains("implementation"),-contains("accessory"),-contains("expansion"),-contains("compilation"))
View(bgg_data3)
write_csv(bgg_data3,"./output/board_game_dataset.csv")
install.packages("googlesheets")
install.packages("rtools")
writeLines('PATH="${RTOOLS40_HOME}\\usr\\bin;${PATH}"', con = "~/.Renviron")
Sys.which("make")
getwd()
setwd("C:/")
writeLines('PATH="${RTOOLS40_HOME}\\usr\\bin;${PATH}"', con = "~/.Renviron")
writeLines('PATH="${RTOOLS40_HOME}\\usr\\bin;${PATH}"', con = "~/.Renviron")
Sys.which("make")
Sys.which("make")''
Sys.which("make")
Sys.which("make")
Sys.which("make")
Sys.which("make")
Sys.which("make")
Sys.which("make")
Sys.which("make")
Sys.which("make")
install.packages("jsonlite", type = "source")
writeLines('PATH="${RTOOLS40_HOME}\\usr\\bin;${PATH}"', con = "~/.Renviron")
library(tidyverse)
library(googlesheets)
?googlesheets
vignette(googlesheets)
vignette("googlesheets")
my_sheets<-gs_ls()
gs_ls
gs_ls()
gs_auth()
gs_auth(new_user = TRUE)
remove.packages("googlesheets")
install.packages("googlesheets4")
library(googlesheets4)
read_sheet()
SS<-"https://docs.google.com/spreadsheets/d/1Y0Odg0ar_YsraYrcQ4r-oJJzSDpIK97SkLBv0yhRMWk/edit#gid=1796417297"
googlesheets4::read_sheet(SS)
googlesheets4::read_sheet(SS, sheet = "full_dataset")
data_import<-googlesheets4::read_sheet(SS, sheet = "full_dataset")
head(data_import)
View(data_import)
all_mechanics<-c(data_import$mechanic0, data_import$mechanic1)
unique_mechanics<-unique(all_mechanics)
all_mechanics<-c(data_import$mechanic0, data_import$mechanic1, data_import$mechanic2,data_import$mechanic3,
data_import$mechanic4, data_import$mechanic5, data_import$mechanic6, data_import$mechanic7,
data_import$mechanic8, data_import$mechanic9)
unique_mechanics<-unique(all_mechanics)
unique_mechanics
names(data_import)
all_categorys<-c(data_import$category0, data_import$category1, data_import$category2,data_import$category3,
data_import$category4, data_import$category5, data_import$category6, data_import$category7,
data_import$category8, data_import$category9)
unique_categorys<-unique(all_categorys)
unique_mechanics
unique_categorys
library(rmarkdown)
names(data_import)
all_categorys<-c(data_import$category0, data_import$category1, data_import$category2,data_import$category3,
data_import$category4, data_import$category5, data_import$category6, data_import$category7,
data_import$category8, data_import$category9)
unique_categorys<-unique(all_categorys)
all_publishers<-c(data_import$publisher0, data_import$publisher1, data_import$publisher2,data_import$publisher3,
data_import$publisher4, data_import$publisher5, data_import$publisher6, data_import$publisher7,
data_import$publisher8, data_import$publisher9)
unique_publishers<-unique(all_publishers)
all_designers<-c(data_import$designer0, data_import$designer1, data_import$designer2,data_import$designer3,
data_import$designer4, data_import$designer5, data_import$designer6, data_import$designer7,
data_import$designer8, data_import$designer9)
unique_designers<-unique(all_designers)
#are 85 unique designer
unique_designers
all_artists<-c(data_import$artist0, data_import$artist1, data_import$artist2,data_import$artist3,
data_import$artist4, data_import$artist5, data_import$artist6, data_import$artist7,
data_import$artist8, data_import$artist9)
unique_artists<-unique(all_artists)
?id
id()
install.packages("id")
data_import2<-data_import %>% mutate(ID=cur_group_id())
View(data_import2)
data_import2<-data_import %>% mutate(ID=row_number())
data_import2<-data_import %>%
mutate(ID=row_number()) %>%
group_by(ID) %>%
mutate(actualID=cur_group_id())
data_import2<-data_import %>%
mutate(ID=row_number()) %>%
group_by(ID) %>%
mutate(actualID=cur_group_id()) %>%
select(actualID, ID, everything())
View(data_import2)
?cur_group_id
names(data_import)
publisher_table<-data_import2 %>%
select(ID, Name,contains("publisher") )
View(publisher_table)
?vignette(colwise)
?vignette("colwise")
?across
publisher_table<-data_import2 %>%
select(ID, Name,contains("publisher"))%>%
mutate(across(contains("publisher"), funs(case_when(
.=="NA" ~ NA,
TRUE ~ .))))
publisher_table<-data_import2 %>%
select(ID, Name,contains("publisher"))%>%
mutate(across(contains("publisher"), funs(case_when(
.=="NA" ~ NA,
.==. ~ .))))
publisher_table<-data_import2 %>%
select(ID, Name,contains("publisher"))%>%
mutate(across(contains("publisher"),
~ ifelse(.x == "NA", NA, .x)))
View(publisher_table)
names(data_import)
data_import2<-data_import %>%
mutate(across(contains(c("designer", "artist", "category", "mechanic", "family", "publisher"),
~ ifelse(.x == "NA", NA, .x))))
data_import2<-data_import %>%
mutate(across(contains("designer", "artist", "category", "mechanic", "family", "publisher"),
~ ifelse(.x == "NA", NA, .x)))
data_import2<-data_import %>%
mutate(across(contains("designer")|contains("artist")|contains("category")| contains("mechanic") |
contains("family")| contains("publisher"),
~ ifelse(.x == "NA", NA, .x)))
View(data_import2)
data_import2<-data_import %>%
mutate(across(contains("designer")|contains("artist")|contains("category")| contains("mechanic") |
contains("family")| contains("publisher")|contains("rank"),
~ ifelse(.x == "NA", NA, .x)))
View(data_import2)
data_import2<-data_import %>%
mutate(across(contains("designer")|contains("artist")|contains("category")| contains("mechanic") |
contains("family")| contains("publisher")|contains("rank"),
~ ifelse(.x == "NA", NA, .x)))
View(data_import2)
data_import2<-data_import %>%
mutate(across(contains("designer")|contains("artist")|contains("category")| contains("mechanic") |
contains("family")| contains("publisher")|ends_with("rank"),
~ ifelse(.x == "NA", NA, .x)))
View(data_import2)
View(data_import)
data_test<-data_import %>%
select(ends_with("rank"))
View(data_test)
publisher_table<-data_import3 %>%
select(ID, Name,contains("publisher")))
View(publisher_table)
?pivot_longer
publisher_table<-data_import3 %>%
select(ID, Name,contains("publisher")) %>%
pivot_longer(cols=contains("publisher"), names_to = "PublisherNum", values_to = "Publisher", values_drop_na = TRUE)
data_import3<-data_import2 %>%
mutate(ID=row_number()) %>%
group_by(ID) %>%
mutate(actualID=cur_group_id()) %>%
select(actualID, ID, everything())
publisher_table<-data_import3 %>%
select(ID, Name,contains("publisher")) %>%
pivot_longer(cols=contains("publisher"), names_to = "PublisherNum", values_to = "Publisher", values_drop_na = TRUE)
View(publisher_table)
publisher_table %>% group_by(Publisher) %>%summarise(total=n()) %>%arrange(desc())
publisher_table %>% group_by(Publisher) %>%summarise(total=n())
publisher_table %>% group_by(Publisher) %>%summarise(total=n())
publisher_table %>%
group_by(Publisher) %>%
summarise(total=n()) %>%
arrange(total)
?arrange
publisher_table %>%
group_by(Publisher) %>%
summarise(total=n()) %>%
arrange(desc(total))
print_x<-function(x=""){
print(as.character(x))
}
print_x(x="hey")
create_table<-function(name=""){
new_table<-data_import3 %>%
select(ID, Name,contains(as.character(name))) %>%
pivot_longer(cols=contains(as.character(name)), names_to = "VarNum", values_to = as.character(name), values_drop_na = TRUE)
new_table2 %>%
group_by(name) %>%
summarise(total=n()) %>%
arrange(desc(total))
return(new_table2)
}
publisher<-create_table(name="publisher")
create_table<-function(name=""){
new_table<-data_import3 %>%
select(ID, Name,contains(as.character(name))) %>%
pivot_longer(cols=contains(as.character(name)), names_to = "VarNum", values_to = as.character(name), values_drop_na = TRUE)
new_table<-new_table2 %>%
group_by(name) %>%
summarise(total=n()) %>%
arrange(desc(total))
return(new_table2)
}
publisher<-create_table(name="publisher")
create_table<-function(name=""){
new_table<-data_import3 %>%
select(ID, Name,contains(as.character(name))) %>%
pivot_longer(cols=contains(as.character(name)), names_to = "VarNum", values_to = as.character(name), values_drop_na = TRUE)
new_table<-new_table2 %>%
group_by(name) %>%
summarise(total=n()) %>%
arrange(desc(total))
return(new_table2)
}
artist_table<-create_table(name=artist)
artist_table<-create_table(name="artist")
create_table<-function(name=""){
new_table<-data_import3 %>%
select(ID, Name,contains(as.character(name))) %>%
pivot_longer(cols=contains(as.character(name)), names_to = "VarNum", values_to = as.character(name), values_drop_na = TRUE)
new_table2<-new_table %>%
group_by(name) %>%
summarise(total=n()) %>%
arrange(desc(total))
return(new_table2)
}
artist_table<-create_table(name="artist")
create_table<-function(name=""){
new_table<-data_import3 %>%
select(ID, Name,contains(as.character(name))) %>%
pivot_longer(cols=contains(as.character(name)), names_to = "VarNum", values_to = as.character(name), values_drop_na = TRUE)
new_table2<-new_table %>%
group_by(as.character(name)) %>%
summarise(total=n()) %>%
arrange(desc(total))
return(new_table2)
}
artist_table<-create_table(name="artist")
View(artist_table)
View(publisher_table)
create_table<-function(name=""){
new_table<-data_import3 %>%
select(ID, Name,contains(as.character(name))) %>%
pivot_longer(cols=contains(as.character(name)), names_to = "VarNum", values_to = as.character(name), values_drop_na = TRUE)
new_table2<-new_table %>%
group_by_at(name) %>%
summarise(total=n()) %>%
arrange(desc(total))
return(new_table2)
}
artist_table<-create_table(name="artist")
View(artist_table)
publisher_table<-create_table(name="publisher")
View(publisher_table)
publisher_table2<-create_table(name="publisher")
publisher_table<-data_import3 %>%
select(ID, Name,contains("publisher")) %>%
pivot_longer(cols=contains("publisher"), names_to = "PublisherNum", values_to = "Publisher", values_drop_na = TRUE)
publisher_table %>%
group_by(Publisher) %>%
summarise(total=n()) %>%
arrange(desc(total))
View(publisher_table)
View(publisher_table2)
View(publisher_table)
publisher_table1<-publisher_table %>%
group_by(Publisher) %>%
summarise(total=n()) %>%
arrange(desc(total))
View(publisher_table1)
View(data_import3)
library(tidyverse)
library(googlesheets4)
SS<-"https://docs.google.com/spreadsheets/d/1Y0Odg0ar_YsraYrcQ4r-oJJzSDpIK97SkLBv0yhRMWk/edit#gid=1796417297"
data_import<-googlesheets4::read_sheet(SS, sheet = "full_dataset")
data_import2<-data_import %>%
mutate(across(contains("designer")|contains("artist")|contains("category")| contains("mechanic") |
contains("family")| contains("publisher")|ends_with("rank"),
~ ifelse(.x == "NA", NA, .x)))
View(data_import2)
View(data_import2)
test<-data_import %>%
select(contains("rank"))
View(test)
data_import2<-data_import %>%
mutate(across(contains("designer")|contains("artist")|contains("category")| contains("mechanic") |
contains("family")| contains("publisher")|contains("rank"),
~ ifelse(.x == "NA", NA, .x)))
View(data_import2)
data_import2<-data_import %>%
mutate(across(contains("rank")), as.numeric()) %>%
mutate(across(contains("designer")|contains("artist")|contains("category")| contains("mechanic") |
contains("family")| contains("publisher")|ends_with("rank"),
~ ifelse(.x == "NA", NA, .x)))
names(test)
test<-data_import %>%
select(contains("rank")) %>%
mutate(familyrank=as.numeric(familyrank))
warnings()
View(test)
test<-head(data_import,100) %>%
select(contains("rank")) %>%
mutate(across(contains("rank")),~as.numeric)
test<-head(data_import,100) %>%
select(contains("rank")) %>%
mutate(across(contains("rank")),funs(as.numeric))
test<-head(data_import,100) %>%
select(contains("rank")) %>%
mutate(across(contains("rank")),as.numeric)
test<-head(data_import,100) %>%
select(contains("rank")) %>%
mutate(across(contains("rank")),as.numeric(.x))
data_import2<-data_import %>%
mutate(across(contains("rank")), funs(as.numeric))%>%
mutate(across(contains("designer")|contains("artist")|contains("category")| contains("mechanic") |
contains("family")| contains("publisher")|ends_with("rank"),
~ ifelse(.x == "NA", NA, .x)))
str(data_import)
as.numeric(data_import$abstractrank)
data_import2<-data_import %>%
select(-contains("rank"))%>%
mutate(across(contains("designer")|contains("artist")|contains("category")| contains("mechanic") |
contains("family")| contains("publisher"),
~ ifelse(.x == "NA", NA, .x)))
